package org.opentestsystem.ap.imrt.iss.dto;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import org.opentestsystem.ap.common.model.Item;

import java.time.Duration;
import java.time.Instant;
import java.util.Optional;

/**
 * Representation of the {@link org.opentestsystem.ap.imrt.common.model.ImrtItem} domain object
 */
public class ItemDto {
    private String id;
    private String subject;
    private String grade;
    private String workflowStatus;
    private String itemType;
    private String depthOfKnowledge;
    private String createdBy;
    private Instant createdAt;
    private Item itemDetail;
    private String stimulusId;
    private boolean beingCreated;
    private String organizationTypeId;
    private String organizationName;
    private String contentTaskModel;
    private Instant workflowStatusUpdatedDate;

    //Standard Alignment Information
    private String primaryClaim;
    private String primaryAssessmentTarget;
    private String primaryContentDomain;
    private String primaryCommonCoreStandard;
    private String secondaryClaim;
    private String secondaryAssessmentTarget;
    private String secondaryContentDomain;
    private String secondaryCommonCoreStandard;
    private String tertiaryClaim;
    private String tertiaryAssessmentTarget;
    private String tertiaryContentDomain;
    private String tertiaryCommonCoreStandard;
    private String quaternaryClaim;
    private String quaternaryAssessmentTarget;
    private String quaternaryContentDomain;
    private String quaternaryCommonCoreStandard;

    /**
     * @return the unique item id
     */
    public String getId() {
        return id;
    }

    /**
     * @return the subject for the item
     */
    public String getSubject() {
        return subject;
    }

    /**
     * @return the grade
     */
    public String getGrade() {
        return grade;
    }

    /**
     * @return the current workflow status of the item
     */
    public String getWorkflowStatus() {
        return workflowStatus;
    }

    /**
     * @return the type of item.  This will be the item type code
     */
    public String getItemType() {
        return itemType;
    }

    /**
     * @return the depth of knowledge value for the item
     */
    public String getDepthOfKnowledge() {
        return depthOfKnowledge;
    }

    /**
     * @return the username for the user that created the item
     */
    public String getCreatedBy() {
        return createdBy;
    }

    /**
     * @return the time the item was created
     */
    public Instant getCreatedAt() {
        return createdAt;
    }

    /**
     * @return the item's associated stimulus id otherwise blank
     */
    public String getStimulusId() {
        return stimulusId;
    }

    /**
     * @return the item detail as stored in the item bank
     */
    @JsonInclude(JsonInclude.Include.NON_NULL)
    public Item getItemDetail() {
        return itemDetail;
    }

    /**
     * @return {@code true} if the item is being created and is not yet officially in the item bank
     */
    @JsonProperty("isBeingCreated")
    public boolean isBeingCreated() {
        return beingCreated;
    }

    /**
     * @return The organization type id for the item
     */
    public String getOrganizationTypeId() {
        return organizationTypeId;
    }

    /**
     * @return The organization name for the item
     */
    public String getOrganizationName() {
        return organizationName;
    }

    /**
     * @return the primary claim for the item
     */
    public String getPrimaryClaim() {
        return primaryClaim;
    }

    /**
     * @return the primary assessment target
     */
    public String getPrimaryAssessmentTarget() {
        return primaryAssessmentTarget;
    }

    /**
     * @return the primary content domain
     */
    public String getPrimaryContentDomain() {
        return primaryContentDomain;
    }

    /**
     * @return the primary common core standard
     */
    public String getPrimaryCommonCoreStandard() {
        return primaryCommonCoreStandard;
    }

    /**
     * @return the secondary claim
     */
    public String getSecondaryClaim() {
        return secondaryClaim;
    }

    /**
     * @return the secondary assessment target
     */
    public String getSecondaryAssessmentTarget() {
        return secondaryAssessmentTarget;
    }

    /**
     * @return the secondary content domain
     */
    public String getSecondaryContentDomain() {
        return secondaryContentDomain;
    }

    /**
     * @return the secondary common core standard
     */
    public String getSecondaryCommonCoreStandard() {
        return secondaryCommonCoreStandard;
    }

    /**
     * @return the tertiary claim id
     */
    public String getTertiaryClaim() {
        return tertiaryClaim;
    }

    /**
     * @return the tertiary assessment target
     */
    public String getTertiaryAssessmentTarget() {
        return tertiaryAssessmentTarget;
    }

    /**
     * @return the tertiary content domain
     */
    public String getTertiaryContentDomain() {
        return tertiaryContentDomain;
    }

    /**
     * @return the tertiary common core standard
     */
    public String getTertiaryCommonCoreStandard() {
        return tertiaryCommonCoreStandard;
    }

    /**
     * @return the quaternary claim id
     */
    public String getQuaternaryClaim() {
        return quaternaryClaim;
    }

    /**
     * @return the quaternary assessment target
     */
    public String getQuaternaryAssessmentTarget() {
        return quaternaryAssessmentTarget;
    }

    /**
     * @return the quaternary content domain
     */
    public String getQuaternaryContentDomain() {
        return quaternaryContentDomain;
    }

    /**
     * @return the quaternary common core standard
     */
    public String getQuaternaryCommonCoreStandard() {
        return quaternaryCommonCoreStandard;
    }

    /**
     * @return the item's content task model
     */
    public String getContentTaskModel() {
        return contentTaskModel;
    }

    /**
     * @return the last time the workflow status was set or updated
     */
    public Instant getWorkflowStatusUpdatedDate() {
        return workflowStatusUpdatedDate;
    }

    /**
     * @return the number of days since the workflow status was changed.  Days based on UTC
     */
    public Optional<Long> getDaysInWorkflowStatus() {
        if(workflowStatusUpdatedDate == null) {
            return Optional.empty();
        }

        return Optional.of(Duration.between(workflowStatusUpdatedDate, Instant.now()).toDays());
    }

    /**
     * @return a new {@link Builder}
     */
    public static Builder builder() {
        return new Builder();
    }

    public static final class Builder {
        private String id;
        private String subject;
        private String grade;
        private String workflowStatus;
        private String itemType;
        private String depthOfKnowledge;
        private String createdBy;
        private Instant createdAt;
        private Item itemDetail;
        private String stimulusId;
        private boolean beingCreated;
        private String organizationTypeId;
        private String organizationName;
        private String primaryClaim;
        private String primaryAssessmentTarget;
        private String primaryContentDomain;
        private String primaryCommonCoreStandard;
        private String secondaryClaim;
        private String secondaryAssessmentTarget;
        private String secondaryContentDomain;
        private String secondaryCommonCoreStandard;
        private String tertiaryClaim;
        private String tertiaryAssessmentTarget;
        private String tertiaryContentDomain;
        private String tertiaryCommonCoreStandard;
        private String quaternaryClaim;
        private String quaternaryAssessmentTarget;
        private String quaternaryContentDomain;
        private String quaternaryCommonCoreStandard;
        private String contentTaskModel;
        private Instant workflowStatusUpdatedDate;

        private Builder() {
        }

        public Builder withId(String id) {
            this.id = id;
            return this;
        }

        public Builder withSubject(String subject) {
            this.subject = subject;
            return this;
        }

        public Builder withGrade(String grade) {
            this.grade = grade;
            return this;
        }

        public Builder withWorkflowStatus(String workflowStatus) {
            this.workflowStatus = workflowStatus;
            return this;
        }

        public Builder withItemType(String itemType) {
            this.itemType = itemType;
            return this;
        }

        public Builder withDepthOfKnowledge(String depthOfKnowledge) {
            this.depthOfKnowledge = depthOfKnowledge;
            return this;
        }

        public Builder withCreatedBy(String createdBy) {
            this.createdBy = createdBy;
            return this;
        }

        public Builder withCreatedAt(Instant createdAt) {
            this.createdAt = createdAt;
            return this;
        }

        public Builder withItemDetail(Item itemDetail) {
            this.itemDetail = itemDetail;
            return this;
        }

        public Builder withStimulusId(String stimulusId) {
            this.stimulusId = stimulusId;
            return this;
        }

        public Builder withBeingCreated(boolean beingCreated) {
            this.beingCreated = beingCreated;
            return this;
        }

        public Builder withOrganizationTypeId(String organizationTypeId) {
            this.organizationTypeId = organizationTypeId;
            return this;
        }

        public Builder withOrganizationName(String organizationName) {
            this.organizationName = organizationName;
            return this;
        }

        public Builder withPrimaryClaim(String primaryClaim) {
            this.primaryClaim = primaryClaim;
            return this;
        }

        public Builder withPrimaryAssessmentTarget(String primaryAssessmentTarget) {
            this.primaryAssessmentTarget = primaryAssessmentTarget;
            return this;
        }

        public Builder withPrimaryContentDomain(String primaryContentDomain) {
            this.primaryContentDomain = primaryContentDomain;
            return this;
        }

        public Builder withPrimaryCommonCoreStandard(String primaryCommonCoreStandard) {
            this.primaryCommonCoreStandard = primaryCommonCoreStandard;
            return this;
        }

        public Builder withSecondaryClaim(String secondaryClaim) {
            this.secondaryClaim = secondaryClaim;
            return this;
        }

        public Builder withSecondaryAssessmentTarget(String secondaryAssessmentTarget) {
            this.secondaryAssessmentTarget = secondaryAssessmentTarget;
            return this;
        }

        public Builder withSecondaryContentDomain(String secondaryContentDomain) {
            this.secondaryContentDomain = secondaryContentDomain;
            return this;
        }

        public Builder withSecondaryCommonCoreStandard(String secondaryCommonCoreStandard) {
            this.secondaryCommonCoreStandard = secondaryCommonCoreStandard;
            return this;
        }

        public Builder withTertiaryClaim(String tertiaryClaim) {
            this.tertiaryClaim = tertiaryClaim;
            return this;
        }

        public Builder withTertiaryAssessmentTarget(String tertiaryAssessmentTarget) {
            this.tertiaryAssessmentTarget = tertiaryAssessmentTarget;
            return this;
        }

        public Builder withTertiaryContentDomain(String tertiaryContentDomain) {
            this.tertiaryContentDomain = tertiaryContentDomain;
            return this;
        }

        public Builder withTertiaryCommonCoreStandard(String tertiaryCommonCoreStandard) {
            this.tertiaryCommonCoreStandard = tertiaryCommonCoreStandard;
            return this;
        }

        public Builder withQuaternaryClaim(String quaternaryClaim) {
            this.quaternaryClaim = quaternaryClaim;
            return this;
        }

        public Builder withQuaternaryAssessmentTarget(String quaternaryAssessmentTarget) {
            this.quaternaryAssessmentTarget = quaternaryAssessmentTarget;
            return this;
        }

        public Builder withQuaternaryContentDomain(String quaternaryContentDomain) {
            this.quaternaryContentDomain = quaternaryContentDomain;
            return this;
        }

        public Builder withQuaternaryCommonCoreStandard(String quaternaryCommonCoreStandard) {
            this.quaternaryCommonCoreStandard = quaternaryCommonCoreStandard;
            return this;
        }

        public Builder withContentTaskModel(String contentTaskModel) {
            this.contentTaskModel = contentTaskModel;
            return this;
        }

        public Builder withWorkflowStatusUpdatedDate(Instant workflowStatusUpdatedDate) {
            this.workflowStatusUpdatedDate = workflowStatusUpdatedDate;
            return this;
        }

        public ItemDto build() {
            ItemDto itemDto = new ItemDto();
            itemDto.quaternaryAssessmentTarget = this.quaternaryAssessmentTarget;
            itemDto.secondaryAssessmentTarget = this.secondaryAssessmentTarget;
            itemDto.quaternaryClaim = this.quaternaryClaim;
            itemDto.createdAt = this.createdAt;
            itemDto.primaryContentDomain = this.primaryContentDomain;
            itemDto.secondaryCommonCoreStandard = this.secondaryCommonCoreStandard;
            itemDto.stimulusId = this.stimulusId;
            itemDto.depthOfKnowledge = this.depthOfKnowledge;
            itemDto.quaternaryCommonCoreStandard = this.quaternaryCommonCoreStandard;
            itemDto.primaryAssessmentTarget = this.primaryAssessmentTarget;
            itemDto.secondaryClaim = this.secondaryClaim;
            itemDto.itemType = this.itemType;
            itemDto.tertiaryContentDomain = this.tertiaryContentDomain;
            itemDto.beingCreated = this.beingCreated;
            itemDto.organizationTypeId = this.organizationTypeId;
            itemDto.primaryClaim = this.primaryClaim;
            itemDto.tertiaryAssessmentTarget = this.tertiaryAssessmentTarget;
            itemDto.secondaryContentDomain = this.secondaryContentDomain;
            itemDto.primaryCommonCoreStandard = this.primaryCommonCoreStandard;
            itemDto.grade = this.grade;
            itemDto.id = this.id;
            itemDto.itemDetail = this.itemDetail;
            itemDto.subject = this.subject;
            itemDto.createdBy = this.createdBy;
            itemDto.organizationName = this.organizationName;
            itemDto.tertiaryClaim = this.tertiaryClaim;
            itemDto.quaternaryContentDomain = this.quaternaryContentDomain;
            itemDto.workflowStatus = this.workflowStatus;
            itemDto.tertiaryCommonCoreStandard = this.tertiaryCommonCoreStandard;
            itemDto.contentTaskModel = this.contentTaskModel;
            itemDto.workflowStatusUpdatedDate = this.workflowStatusUpdatedDate;
            return itemDto;
        }
    }
}