package org.opentestsystem.ap.imrt.iss.dto;

import com.fasterxml.jackson.annotation.JsonInclude;
import org.opentestsystem.ap.common.model.Item;

import java.time.Instant;
import java.util.List;
import java.util.Optional;

/**
 * Representation of the {@link org.opentestsystem.ap.imrt.common.model.ImrtItem} domain object
 */
public class ItemDto {
    private String id;
    private String subject;
    private String grade;
    private String workflowStatus;
    private String itemType;
    private String depthOfKnowledge;
    private String createdBy;
    private Instant createdAt;
    private List<StandardIdDto> standardIds;
    private Item itemDetail;
    private String stimulusId;
    private boolean beingCreated;

    /**
     * @return the unique item id
     */
    public String getId() {
        return id;
    }

    /**
     * @return the subject for the item
     */
    public String getSubject() {
        return subject;
    }

    /**
     * @return the grade
     */
    public String getGrade() {
        return grade;
    }

    /**
     * @return the current workflow status of the item
     */
    public String getWorkflowStatus() {
        return workflowStatus;
    }

    /**
     * @return the type of item.  This will be the item type code
     */
    public String getItemType() {
        return itemType;
    }

    /**
     * @return the depth of knowledge value for the item
     */
    public String getDepthOfKnowledge() {
        return depthOfKnowledge;
    }

    /**
     * @return the username for the user that created the item
     */
    public String getCreatedBy() {
        return createdBy;
    }

    /**
     * @return the time the item was created
     */
    public Instant getCreatedAt() {
        return createdAt;
    }

    /**
     * @return list of alignment data for the item
     */
    public List<StandardIdDto> getStandardIds() {
        return standardIds;
    }

    /**
     * @return the item's associated stimulus id otherwise blank
     */
    public String getStimulusId() {
        return stimulusId;
    }

    /**
     * @return the item detail as stored in the item bank
     */
    @JsonInclude(JsonInclude.Include.NON_NULL)
    public Optional<Item> getItemDetail() {
        return Optional.ofNullable(itemDetail);
    }

    public boolean isBeingCreated() {
        return beingCreated;
    }

    /**
     * @return builder for the object
     */
    public static Builder builder() {
        return new Builder();
    }

    public static final class Builder {
        private String id;
        private String subject;
        private String grade;
        private String workflowStatus;
        private String itemType;
        private String depthOfKnowledge;
        private String itemCreatedBy;
        private Instant itemCreatedAt;
        private List<StandardIdDto> standardIds;
        private Item item;
        private String stimlulusId;
        private boolean beingCreated;

        private Builder() {
        }

        public Builder withId(String id) {
            this.id = id;
            return this;
        }

        public Builder withSubject(String subject) {
            this.subject = subject;
            return this;
        }

        public Builder withGrade(String grade) {
            this.grade = grade;
            return this;
        }

        public Builder withWorkflowStatus(String workflowStatus) {
            this.workflowStatus = workflowStatus;
            return this;
        }

        public Builder withItemType(String itemType) {
            this.itemType = itemType;
            return this;
        }

        public Builder withDepthOfKnowledge(String depthOfKnowledge) {
            this.depthOfKnowledge = depthOfKnowledge;
            return this;
        }

        public Builder withCreatedBy(String itemCreatedBy) {
            this.itemCreatedBy = itemCreatedBy;
            return this;
        }

        public Builder withCreatedAt(Instant itemCreatedAt) {
            this.itemCreatedAt = itemCreatedAt;
            return this;
        }

        public Builder withStandardIds(List<StandardIdDto> standardIds) {
            this.standardIds = standardIds;
            return this;
        }

        public Builder withItem(Item item) {
            this.item = item;
            return this;
        }

        public Builder withStimulusId(final String stimulusId) {
            this.stimlulusId = stimulusId;
            return this;
        }

        public Builder withBeingCreated(final boolean beingCreated) {
            this.beingCreated = beingCreated;
            return this;
        }

        public ItemDto build() {
            ItemDto itemDto = new ItemDto();
            itemDto.grade = this.grade;
            itemDto.workflowStatus = this.workflowStatus;
            itemDto.itemType = this.itemType;
            itemDto.createdBy = this.itemCreatedBy;
            itemDto.subject = this.subject;
            itemDto.standardIds = this.standardIds;
            itemDto.id = this.id;
            itemDto.createdAt = this.itemCreatedAt;
            itemDto.depthOfKnowledge = this.depthOfKnowledge;
            itemDto.itemDetail = this.item;
            itemDto.stimulusId = this.stimlulusId;
            itemDto.beingCreated = this.beingCreated;
            return itemDto;
        }
    }
}