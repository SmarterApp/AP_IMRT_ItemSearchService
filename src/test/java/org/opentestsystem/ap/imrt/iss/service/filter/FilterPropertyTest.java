package org.opentestsystem.ap.imrt.iss.service.filter;

import org.junit.Test;
import org.opentestsystem.ap.imrt.iss.dto.search.IntegerRangeFilter;
import org.opentestsystem.ap.imrt.iss.dto.search.MatchFilter;

import java.util.Collections;

import static org.assertj.core.api.Assertions.assertThat;
import static org.opentestsystem.ap.imrt.iss.dto.search.Filter.ITEM_ID;
import static org.opentestsystem.ap.imrt.iss.dto.search.Filter.STIMULUS_ID;

public class FilterPropertyTest {

    @Test
    public void shouldIndicateIfPropertySupported() {
        assertThat(FilterProperty.isPropertySearchable(ITEM_ID)).isTrue();
    }

    @Test
    public void shouldIndicateIfFilterSupported() {
        assertThat(FilterProperty.isSupportedFilterForProperty(new MatchFilter(ITEM_ID, Collections.emptyList()))).isTrue();
        assertThat(FilterProperty.isSupportedFilterForProperty(new IntegerRangeFilter(ITEM_ID, 0, 0))).isFalse();
    }

    @Test
    public void shouldGetImrtItemProperty() {
        assertThat(FilterProperty.getImrtSearchProperty("bogus")).isEmpty();
        assertThat(FilterProperty.getImrtSearchProperty(STIMULUS_ID)).isPresent();
    }
}